\hypertarget{bank__head_8h}{
\section{Riferimenti per il file src/proxy/include/bank\_\-head.h}
\label{bank__head_8h}\index{src/proxy/include/bank\_\-head.h@{src/proxy/include/bank\_\-head.h}}
}
{\ttfamily \#include \char`\"{}types.h\char`\"{}}\par
Grafo delle dipendenze di inclusione per bank\_\-head.h:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=288pt]{bank__head_8h__incl}
\end{center}
\end{figure}
Questo grafo mostra quali altri file includono direttamente o indirettamente questo file:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=234pt]{bank__head_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Funzioni}
\begin{DoxyCompactItemize}
\item 
char \hyperlink{bank__head_8h_aa37408ed08dc415b076779d220c2a16b}{cache\_\-exists} (char $\ast$remote\_\-path, int dealloca, char $\ast$$\ast$local\_\-path, char flag)
\item 
RES $\ast$ \hyperlink{bank__head_8h_a1a6cc69578f155db9f523fe3cb0a9cc2}{cache\_\-init} (RES $\ast$Threads\_\-Resource, char existance\_\-val, char $\ast$remote\_\-path)
\item 
int \hyperlink{bank__head_8h_a3a2816dfcda244619c7ab8ce1411f2fc}{cache\_\-init\_\-socket} (sockets $\ast$Bart, int max\_\-socks, int no, int remote\_\-file\_\-size)
\item 
void \hyperlink{bank__head_8h_a9b85983f9add0b5f18181f7bb7918ed5}{cache\_\-done} (RES $\ast$resource)
\end{DoxyCompactItemize}


\subsection{Documentazione delle funzioni}
\hypertarget{bank__head_8h_a9b85983f9add0b5f18181f7bb7918ed5}{
\index{bank\_\-head.h@{bank\_\-head.h}!cache\_\-done@{cache\_\-done}}
\index{cache\_\-done@{cache\_\-done}!bank_head.h@{bank\_\-head.h}}
\subsubsection[{cache\_\-done}]{\setlength{\rightskip}{0pt plus 5cm}void cache\_\-done (
\begin{DoxyParamCaption}
\item[{RES $\ast$}]{resource}
\end{DoxyParamCaption}
)}}
\label{bank__head_8h_a9b85983f9add0b5f18181f7bb7918ed5}
\hyperlink{bank__head_8h_a9b85983f9add0b5f18181f7bb7918ed5}{cache\_\-done()}: Questa funzione viene chiamata per effettuare l'unmapping della memoria. Deve essere effettuata garantendo precedentemente la mutua esclusione con la mutex\_\-could\_\-close -\/-\/RES-\/-\/. 
\begin{DoxyParams}{Parametri}
{\em resource,:} & risorsa che deve essere chiusa \\
\hline
{\em do\_\-free\_\-not\_\-unmap,:} & identifica se, precedentemente, il file era stato troncato \\
\hline
\end{DoxyParams}
\hypertarget{bank__head_8h_aa37408ed08dc415b076779d220c2a16b}{
\index{bank\_\-head.h@{bank\_\-head.h}!cache\_\-exists@{cache\_\-exists}}
\index{cache\_\-exists@{cache\_\-exists}!bank_head.h@{bank\_\-head.h}}
\subsubsection[{cache\_\-exists}]{\setlength{\rightskip}{0pt plus 5cm}char cache\_\-exists (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{remote\_\-path, }
\item[{int}]{dealloca, }
\item[{char $\ast$$\ast$}]{local\_\-path, }
\item[{char}]{flag}
\end{DoxyParamCaption}
)}}
\label{bank__head_8h_aa37408ed08dc415b076779d220c2a16b}
\hyperlink{bank__head_8h_aa37408ed08dc415b076779d220c2a16b}{cache\_\-exists()}: Dato il pathening remoto, controlla che in cache esista la risorsa corrispondente, o che la risorsa non sia scaduta. Se scade, allora la risorsa viene cancellata e restituito un valore falso. 
\begin{DoxyParams}{Parametri}
{\em remote\_\-path,:} & Percorso della risorsa remota da richiedere al server \\
\hline
{\em dealloca,:} & Se è settato a vero, non viene settato il valore local\_\-path, altrimenti viene aggiornato il suo valore \\
\hline
{\em local\_\-path,:} & Doppio puntatore a carattere: se passato per riferimento un puntatore a carattere, aggiorna il suo valore con la stringa remota; non viene modificato il valore se {\itshape dealloca\/} è settato a vero. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Restituisce}
: Restituisce 0 se non esiste, 1 se esiste e 2 se esiste ma è troncato 
\end{DoxyReturn}
\hypertarget{bank__head_8h_a1a6cc69578f155db9f523fe3cb0a9cc2}{
\index{bank\_\-head.h@{bank\_\-head.h}!cache\_\-init@{cache\_\-init}}
\index{cache\_\-init@{cache\_\-init}!bank_head.h@{bank\_\-head.h}}
\subsubsection[{cache\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}RES$\ast$ cache\_\-init (
\begin{DoxyParamCaption}
\item[{RES $\ast$}]{Threads\_\-Resource, }
\item[{char}]{existance\_\-val, }
\item[{char $\ast$}]{remote\_\-path}
\end{DoxyParamCaption}
)}}
\label{bank__head_8h_a1a6cc69578f155db9f523fe3cb0a9cc2}
\hyperlink{bank__head_8h_a1a6cc69578f155db9f523fe3cb0a9cc2}{cache\_\-init()}: Funzione per la inizializzazione della struttura della risorsa per la cache. 
\begin{DoxyParams}{Parametri}
{\em Threads\_\-Resource,:} & Risorsa locale associata al thread corrente. Può essere settata a NULL se existance\_\-val == 2 \\
\hline
{\em exsistance\_\-val,:} & Valore di esistenza associato al file corrente (ottenuto da cache\_\-exists) \\
\hline
{\em remote\_\-path,:} & Nome della risorsa remota \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Restituisce}
: Restituisce o lo stesso puntatore alla risorsa che è stata associata come parametro. 
\end{DoxyReturn}
\hypertarget{bank__head_8h_a3a2816dfcda244619c7ab8ce1411f2fc}{
\index{bank\_\-head.h@{bank\_\-head.h}!cache\_\-init\_\-socket@{cache\_\-init\_\-socket}}
\index{cache\_\-init\_\-socket@{cache\_\-init\_\-socket}!bank_head.h@{bank\_\-head.h}}
\subsubsection[{cache\_\-init\_\-socket}]{\setlength{\rightskip}{0pt plus 5cm}int cache\_\-init\_\-socket (
\begin{DoxyParamCaption}
\item[{sockets $\ast$}]{Bart, }
\item[{int}]{max\_\-socks, }
\item[{int}]{no, }
\item[{int}]{remote\_\-file\_\-size}
\end{DoxyParamCaption}
)}}
\label{bank__head_8h_a3a2816dfcda244619c7ab8ce1411f2fc}
\hyperlink{bank__head_8h_a3a2816dfcda244619c7ab8ce1411f2fc}{cache\_\-init\_\-socket()}: Data la struttura dati RES come argomento e data la dimensione del file, effettuo la divisione nell'acquisizone della risorsa. Ritorna 0 in caso di successo. 
\begin{DoxyParams}{Parametri}
{\em Bart,:} & Struttura dati da aggiornare \\
\hline
{\em max\_\-socks,:} & Numero totale dei sockets utilizzati dal thread corrente \\
\hline
{\em no,:} & Numero del socket corrente, contando da 1 \\
\hline
{\em remote\_\-file\_\-size,:} & Dimensione del file remoto \\
\hline
\end{DoxyParams}
